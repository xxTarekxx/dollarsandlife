"use strict";exports.id=442,exports.ids=[442],exports.modules={7442:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var i=a(8732),s=a(4233),n=a(2015);let r=(0,n.memo)(({isOpen:e,onClose:t})=>{let[a,r]=(0,n.useState)(""),[l,o]=(0,n.useState)([]),[d,c]=(0,n.useState)([]),[u,p]=(0,n.useState)(!1),[h,f]=(0,n.useState)(!1),g=(0,n.useRef)(null),m=(0,n.useRef)(null),b=(0,s.useRouter)(),C=(0,n.useCallback)(async()=>{if(u||h)return;f(!0);let e=process.env.NEXT_PUBLIC_API_BASE||"/api",t=[{apiPath:"budget-data",baseClientRoute:"/extra-income/budget",identifier:"budget-data"},{apiPath:"freelance-jobs",baseClientRoute:"/extra-income/freelancers",identifier:"freelance-jobs"},{apiPath:"money-making-apps",baseClientRoute:"/extra-income/money-making-apps",identifier:"money-making-apps"},{apiPath:"shopping-deals",baseClientRoute:"/shopping-deals",identifier:"shopping-deals"},{apiPath:"remote-jobs",baseClientRoute:"/extra-income/remote-jobs",identifier:"remote-jobs"},{apiPath:"start-blog",baseClientRoute:"/start-a-blog",identifier:"start-blog"},{apiPath:"breaking-news",baseClientRoute:"/breaking-news",identifier:"breaking-news"}].map(async({apiPath:t,baseClientRoute:a,identifier:i})=>{try{let s=await fetch(`${e}/${t}`);if(!s.ok)return console.warn(`Failed to fetch ${t}: ${s.statusText}`),[];return(await s.json()).map(e=>({id:e.id,headline:e.headline,identifier:i,baseClientRoute:a,slug:e.slug,canonicalUrl:e.canonicalUrl}))}catch(e){return console.warn(`Error processing or fetching ${t}`,e),[]}});o((await Promise.all(t)).flat()),p(!0),f(!1)},[u,h]);(0,n.useEffect)(()=>{if(e&&!u&&C(),e&&m.current){let e=setTimeout(()=>m.current?.focus(),50);return()=>clearTimeout(e)}},[e,u,C]),(0,n.useEffect)(()=>{if(""===a.trim())return void c([]);if(u){let e=a.toLowerCase();c(l.filter(t=>t.headline.toLowerCase().includes(e)))}},[a,l,u]),(0,n.useEffect)(()=>{let a=e=>{g.current&&!g.current.contains(e.target)&&t()};return e&&document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[e,t]);let w=(0,n.useCallback)(e=>{t(),r(""),c([]);let a="";if("shopping-deals"===e.identifier)if(e.canonicalUrl)a=e.canonicalUrl;else if(e.slug)a=`/shopping-deals/products/${e.slug}`;else{let t=`${e.id}-${e.headline.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}`;a=`/shopping-deals/products/${t}`,console.warn("Shopping deal slug generated on client, API should ideally provide it.",e)}else a=`${e.baseClientRoute}/${e.id}`;a?b.push(a):console.warn("Could not determine route for post:",e)},[b,t]);return(0,i.jsxs)("div",{ref:g,className:`search-bar-container ${e?"open":"closed"}`,children:[(0,i.jsx)("input",{ref:m,type:"text",placeholder:h?"Loading data...":"Search posts...",value:a,onChange:e=>r(e.target.value),className:"search-bar","aria-label":"Search posts",disabled:h||!u}),!h&&u&&d.length>0&&(0,i.jsx)("ul",{className:"suggestions-list",children:d.map(e=>(0,i.jsx)("li",{onClick:()=>w(e),children:e.headline},`${e.identifier}-${e.id}`))}),h&&(0,i.jsx)("div",{className:"search-loading",children:"Loading search data..."}),!h&&u&&""!==a.trim()&&0===d.length&&(0,i.jsx)("div",{className:"search-no-results",children:"No matches found."})]})})}};