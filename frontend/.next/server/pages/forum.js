(()=>{var e={};e.id=523,e.ids=[523,636],e.modules={292:e=>{e.exports={postCard:"PostCard_postCard__ZDnsy",postCardTitle:"PostCard_postCardTitle__skBml",postCardTitleLink:"PostCard_postCardTitleLink__Y07is",postCardMeta:"PostCard_postCardMeta__7_ww_",tagLabel:"PostCard_tagLabel__BWAw2",tagList:"PostCard_tagList__W3FN5",tagPill:"PostCard_tagPill__KB1jr",postCardSnippet:"PostCard_postCardSnippet__MXZVg",postCardActions:"PostCard_postCardActions__7q68Z",postCardViewLink:"PostCard_postCardViewLink__1XSBT",voteButtonsContainer:"PostCard_voteButtonsContainer__uNFSP",votePlaceholder:"PostCard_votePlaceholder__1rbRE"}},361:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},1648:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{config:()=>m,default:()=>u,getServerSideProps:()=>g,getStaticPaths:()=>h,getStaticProps:()=>p,reportWebVitals:()=>x,routeModule:()=>P,unstable_getServerProps:()=>C,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>b});var r=s(3885),o=s(237),i=s(1413),l=s(8874),n=s(2386),c=s(3480),d=e([c,n]);[c,n]=d.then?(await d)():d;let u=(0,i.M)(c,"default"),p=(0,i.M)(c,"getStaticProps"),h=(0,i.M)(c,"getStaticPaths"),g=(0,i.M)(c,"getServerSideProps"),m=(0,i.M)(c,"config"),x=(0,i.M)(c,"reportWebVitals"),b=(0,i.M)(c,"unstable_getStaticProps"),f=(0,i.M)(c,"unstable_getStaticPaths"),j=(0,i.M)(c,"unstable_getStaticParams"),C=(0,i.M)(c,"unstable_getServerProps"),v=(0,i.M)(c,"unstable_getServerSideProps"),P=new r.PagesRouteModule({definition:{kind:o.A.PAGES,page:"/forum",pathname:"/forum",bundlePath:"",filename:""},components:{App:n.default,Document:l.default},userland:c});a()}catch(e){a(e)}})},2015:e=>{"use strict";e.exports=require("react")},2326:e=>{"use strict";e.exports=require("react-dom")},2770:e=>{"use strict";e.exports=require("styled-components")},2893:e=>{"use strict";e.exports=import("react-hot-toast")},2965:e=>{"use strict";e.exports=require("react-firebase-hooks/auth")},3480:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>j,getStaticProps:()=>f});var r=s(8732),o=s(6958),i=s(4337),l=s(9918),n=s.n(l),c=s(2015),d=s(2965),u=s(480),p=s(5539),h=s(1173),g=s(3920),m=e([o,i,p,u,h]);[o,i,p,u,h]=m.then?(await m)():m;let x=()=>(0,r.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:"default-profile-icon",children:(0,r.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),b=({firebaseAuth:e,firebaseDb:t,initialPosts:s,staticGenError:a})=>{let[l,h,m]=(0,d.useAuthState)(e),[b,f]=(0,c.useState)(s||[]),[j,C]=(0,c.useState)(!s),[v,P]=(0,c.useState)("timestamp"),[N,y]=(0,c.useState)(null),[S,_]=(0,c.useState)(!1),w=(0,c.useCallback)(()=>{_(!1)},[]);(0,c.useEffect)(()=>{!h&&l&&S&&console.log("ForumHomePage: User logged in, auth modal was open. AuthPromptModal's logic should close it.")},[l,h,S]);let k=()=>{_(!0)},L=async()=>{try{await (0,o.signOut)(e),console.log("ForumHomePage: User logged out.")}catch(e){console.error("ForumHomePage: Error signing out: ",e)}};return((0,c.useEffect)(()=>{let e=async()=>{let e;if(!t){console.warn("ForumHomePage: Firebase DB not available, cannot fetch posts client-side."),C(!1),s&&0!==s.length||f([]);return}C(!0);let a=(0,i.collection)(t,"forumPosts");e=N?(0,i.query)(a,(0,i.where)("tags","array-contains",N.toLowerCase()),(0,i.orderBy)(v,"desc")):(0,i.query)(a,(0,i.orderBy)(v,"desc"));try{let t=(await (0,i.getDocs)(e)).docs.map(e=>({id:e.id,...e.data()}));f(t)}catch(e){console.error("ForumHomePage: Error fetching posts client-side: ",e),s&&0!==s.length||f([])}finally{C(!1)}};s&&s.length>0&&!N&&"timestamp"===v?(f(s),C(!1)):e(),a&&console.error("Error from getStaticProps:",a)},[v,N,t,s,a]),m)?(0,r.jsxs)("div",{className:"page-error-indicator",children:["Authentication Error: ",m.message,". Please try refreshing."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:`forum-homepage-container ${S?"blurred":""}`,children:[(0,r.jsxs)("header",{className:"forum-header",children:[(0,r.jsx)("h1",{children:"Welcome To Our Community!"}),(0,r.jsxs)("div",{className:"forum-header-interactive-area",children:[(0,r.jsx)(n(),{href:"/forum/create-post",className:`create-post-button-main header-ask-question ${!t||h||!l?"disabled-link":""}`,"aria-disabled":!t||h||!l,onClick:e=>{l?(!t||h)&&e.preventDefault():(e.preventDefault(),k())},children:"Ask a Question"}),(0,r.jsx)("div",{className:"user-section",children:h?(0,r.jsx)("span",{className:"auth-loading-text",children:"Loading user..."}):l?(0,r.jsxs)("div",{className:"user-actions-area",children:[(0,r.jsxs)("div",{className:"user-profile-info",children:[l.photoURL?(0,r.jsx)("img",{src:l.photoURL,alt:`${l.displayName||"User"}'s profile`,className:"profile-icon"}):(0,r.jsx)("span",{className:"profile-icon default-icon","aria-label":"Default user profile icon",children:(0,r.jsx)(x,{})}),(0,r.jsx)("span",{className:"display-name",title:l.displayName||"User",children:l.displayName||"User"})]}),(0,r.jsx)("button",{type:"button",onClick:L,className:"logout-button header-logout-button",children:"Logout"})]}):(0,r.jsx)("button",{type:"button",onClick:k,className:"login-signup-button header-login-button",disabled:h,children:"Login / Sign Up"})})]})]}),(0,r.jsxs)("aside",{className:"forum-sidebar",children:[(0,r.jsx)("h3",{children:"Popular Tags"}),(0,r.jsxs)("ul",{className:"tag-filter-list",children:[["Budgeting","Saving","Investing","Credit","Side Hustles","Debt","Freelancing","Real Estate","Taxes","Retirement"].map(e=>{let t=e.toLowerCase(),s=g.A[t]||{bg:"var(--muted-bg-color)",text:"var(--secondary-text-color)"};return(0,r.jsx)("li",{style:{backgroundColor:s.bg,color:s.text,borderColor:"var(--muted-bg-color)"!==s.bg?s.bg:"var(--border-color)"},className:`tag-pill ${N===t?"active-tag":""}`,onClick:()=>y(e=>e===t?null:t),role:"button",tabIndex:0,onKeyPress:e=>{("Enter"===e.key||" "===e.key)&&y(t===N?null:t)},"aria-pressed":N===t,"aria-label":`Filter by tag: ${e}`,children:e},e)}),N&&(0,r.jsxs)("li",{className:"clear-tag",onClick:()=>y(null),role:"button",tabIndex:0,onKeyPress:e=>{("Enter"===e.key||" "===e.key)&&y(null)},"aria-label":"Clear active tag filter",children:["Clear Filter ",(0,r.jsx)("span",{className:"clear-tag-icon",children:"âœ•"})]})]})]}),(0,r.jsxs)("div",{className:"sort-controls",children:[(0,r.jsx)("label",{htmlFor:"sort-select",children:"Sort by:"}),(0,r.jsxs)("select",{id:"sort-select",value:v,onChange:e=>P(e.target.value),"aria-label":"Sort forum posts",children:[(0,r.jsx)("option",{value:"timestamp",children:"Newest"}),(0,r.jsx)("option",{value:"helpfulVoteCount",children:"Most Helpful"})]})]}),(0,r.jsx)("div",{className:"forum-content",children:(0,r.jsxs)("main",{className:"post-feed-area",children:[(0,r.jsx)("h2",{children:"Recent Questions"}),j&&(0,r.jsx)("p",{className:"no-posts-message",children:"Loading posts..."}),!j&&0===b.length&&t&&(0,r.jsx)("p",{className:"no-posts-message",children:"No posts yet. Be the first to ask a question!"}),!j&&0===b.length&&!t&&(0,r.jsx)("p",{className:"no-posts-message",children:"Could not load posts. The forum database might be temporarily unavailable."}),!j&&b.length>0&&(0,r.jsx)("div",{className:"post-list",children:b.map(s=>(0,r.jsx)(p.A,{post:s,auth:e,db:t},s.id))})]})})]}),S&&(0,r.jsx)(u.A,{onClose:w,auth:e})]})},f=async()=>({props:{initialPosts:[]},revalidate:60}),j=({initialPosts:e,error:t})=>{let[s,a]=(0,c.useState)(null),[o,i]=(0,c.useState)(null),[l,n]=(0,c.useState)(!1),[d,u]=(0,c.useState)(null);return((0,c.useEffect)(()=>{(0,h.initializeFirebaseAndGetServices)().then(({auth:e,db:t})=>{a(e),i(t),n(!0)}).catch(e=>{console.error("ForumHomePage Wrapper: Firebase initialization failed:",e),u(e),n(!0)})},[]),l)?d?(0,r.jsxs)("div",{className:"page-error-indicator",children:[(0,r.jsx)("strong",{children:"Error initializing Firebase:"})," ",d.message,".",(0,r.jsx)("br",{}),"Please try refreshing the page."]}):s?(0,r.jsx)(b,{firebaseAuth:s,firebaseDb:o,initialPosts:e,staticGenError:t}):(0,r.jsxs)("div",{className:"page-error-indicator",children:[(0,r.jsx)("strong",{children:"Critical Error:"})," Authentication service could not be loaded.",(0,r.jsx)("br",{}),"The forum cannot operate correctly. Please try refreshing."]}):(0,r.jsx)("div",{className:"page-loading-indicator",children:"Initializing forum services..."})};a()}catch(e){a(e)}})},3873:e=>{"use strict";e.exports=require("path")},4075:e=>{"use strict";e.exports=require("zlib")},4337:e=>{"use strict";e.exports=import("firebase/firestore")},5539:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.d(t,{A:()=>p});var r=s(8732),o=s(9918),i=s.n(o);s(2015);var l=s(3920),n=s(292),c=s.n(n),d=s(9924),u=e([d]);d=(u.then?(await u)():u)[0];let p=({post:e,auth:t,db:s})=>{let a=`/forum/post/${e.title.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"")}`;return(0,r.jsxs)("article",{className:c().postCard,children:[(0,r.jsx)("h3",{className:c().postCardTitle,children:(0,r.jsx)(i(),{href:a,className:c().postCardTitleLink,children:e.title})}),(0,r.jsxs)("div",{className:c().postCardMeta,children:[(0,r.jsxs)("span",{children:["By: ",e.authorDisplayName||"Anonymous"]}),(0,r.jsx)("span",{children:(e=>{if(!e)return"Some time ago";if(e&&"function"==typeof e.toDate)return e.toDate().toLocaleDateString();if(e instanceof Date)return e.toLocaleDateString();try{let t=new Date(e);if(!isNaN(t.getTime()))return t.toLocaleDateString()}catch{}return"Date unavailable"})(e.timestamp)}),e.tags&&e.tags.length>0&&(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:c().tagLabel,children:"Tags:"}),(0,r.jsx)("span",{className:c().tagList,children:e.tags?.map(e=>{let t=l.A[e.toLowerCase()]||{bg:"#ccc",text:"#000"};return(0,r.jsx)("span",{className:c().tagPill,style:{backgroundColor:t.bg,color:t.text},children:e.replace(/\b\w/g,e=>e.toUpperCase())},e)})})]})]}),e.snippet&&(0,r.jsx)("p",{className:c().postCardSnippet,children:e.snippet}),(0,r.jsxs)("div",{className:c().postCardActions,children:[t&&s?(0,r.jsx)(d.A,{itemId:e.id,initialHelpfulVotes:e.helpfulVoteCount,initialNotHelpfulVotes:e.notHelpfulVoteCount,itemType:"post",itemAuthorId:e.authorId,auth:t,db:s}):(0,r.jsx)("div",{className:c().votePlaceholder,children:"Voting unavailable..."}),(0,r.jsxs)(i(),{href:`${a}#answers`,className:c().postCardViewLink,children:[e.answerCount||0," Answers"]})]})]})};a()}catch(e){a(e)}})},6551:e=>{"use strict";e.exports=import("firebase/app")},6958:e=>{"use strict";e.exports=import("firebase/auth")},7910:e=>{"use strict";e.exports=require("stream")},8732:e=>{"use strict";e.exports=require("react/jsx-runtime")},9021:e=>{"use strict";e.exports=require("fs")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[89,705,341,386,55],()=>s(1648));module.exports=a})();