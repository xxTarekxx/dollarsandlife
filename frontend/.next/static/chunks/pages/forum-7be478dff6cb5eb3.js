(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[523],{1799:e=>{e.exports={postCard:"PostCard_postCard__ZDnsy",postCardTitle:"PostCard_postCardTitle__skBml",postCardTitleLink:"PostCard_postCardTitleLink__Y07is",postCardMeta:"PostCard_postCardMeta__7_ww_",tagLabel:"PostCard_tagLabel__BWAw2",tagList:"PostCard_tagList__W3FN5",tagPill:"PostCard_tagPill__KB1jr",postCardSnippet:"PostCard_postCardSnippet__MXZVg",postCardActions:"PostCard_postCardActions__7q68Z",postCardViewLink:"PostCard_postCardViewLink__1XSBT",voteButtonsContainer:"PostCard_voteButtonsContainer__uNFSP",votePlaceholder:"PostCard_votePlaceholder__1rbRE"}},6983:(e,s,t)=>{"use strict";t.r(s),t.d(s,{__N_SSG:()=>b,default:()=>j});var a=t(7876),r=t(5302),l=t(2009),o=t(8230),i=t.n(o),n=t(4232),c=t(3276),d=t(6845),u=t(3233),p=t(1799),h=t.n(p),m=t(3783);let g=e=>{var s;let{post:t,auth:r,db:l}=e,o="/forum/post/".concat(t.title.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,""));return(0,a.jsxs)("article",{className:h().postCard,children:[(0,a.jsx)("h3",{className:h().postCardTitle,children:(0,a.jsx)(i(),{href:o,className:h().postCardTitleLink,children:t.title})}),(0,a.jsxs)("div",{className:h().postCardMeta,children:[(0,a.jsxs)("span",{children:["By: ",t.authorDisplayName||"Anonymous"]}),(0,a.jsx)("span",{children:(e=>{if(!e)return"Some time ago";if(e&&"function"==typeof e.toDate)return e.toDate().toLocaleDateString();if(e instanceof Date)return e.toLocaleDateString();try{let s=new Date(e);if(!isNaN(s.getTime()))return s.toLocaleDateString()}catch(e){}return"Date unavailable"})(t.timestamp)}),t.tags&&t.tags.length>0&&(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:h().tagLabel,children:"Tags:"}),(0,a.jsx)("span",{className:h().tagList,children:null==(s=t.tags)?void 0:s.map(e=>{let s=u.A[e.toLowerCase()]||{bg:"#ccc",text:"#000"};return(0,a.jsx)("span",{className:h().tagPill,style:{backgroundColor:s.bg,color:s.text},children:e.replace(/\b\w/g,e=>e.toUpperCase())},e)})})]})]}),t.snippet&&(0,a.jsx)("p",{className:h().postCardSnippet,children:t.snippet}),(0,a.jsxs)("div",{className:h().postCardActions,children:[r&&l?(0,a.jsx)(m.A,{itemId:t.id,initialHelpfulVotes:t.helpfulVoteCount,initialNotHelpfulVotes:t.notHelpfulVoteCount,itemType:"post",itemAuthorId:t.authorId,auth:r,db:l}):(0,a.jsx)("div",{className:h().votePlaceholder,children:"Voting unavailable..."}),(0,a.jsxs)(i(),{href:"".concat(o,"#answers"),className:h().postCardViewLink,children:[t.answerCount||0," Answers"]})]})]})};var x=t(7858);let f=()=>(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:"default-profile-icon",children:(0,a.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),C=e=>{let{firebaseAuth:s,firebaseDb:t,initialPosts:o,staticGenError:p}=e,[h,m,x]=(0,c.hD)(s),[C,b]=(0,n.useState)(o||[]),[j,N]=(0,n.useState)(!o),[_,v]=(0,n.useState)("timestamp"),[y,P]=(0,n.useState)(null),[w,k]=(0,n.useState)(!1),S=(0,n.useCallback)(()=>{k(!1)},[]);(0,n.useEffect)(()=>{!m&&h&&w&&console.log("ForumHomePage: User logged in, auth modal was open. AuthPromptModal's logic should close it.")},[h,m,w]);let L=()=>{k(!0)},E=async()=>{try{await (0,r.CI)(s),console.log("ForumHomePage: User logged out.")}catch(e){console.error("ForumHomePage: Error signing out: ",e)}};return((0,n.useEffect)(()=>{let e=async()=>{let e;if(!t){console.warn("ForumHomePage: Firebase DB not available, cannot fetch posts client-side."),N(!1),o&&0!==o.length||b([]);return}N(!0);let s=(0,l.rJ)(t,"forumPosts");e=y?(0,l.P)(s,(0,l._M)("tags","array-contains",y.toLowerCase()),(0,l.My)(_,"desc")):(0,l.P)(s,(0,l.My)(_,"desc"));try{let s=(await (0,l.GG)(e)).docs.map(e=>({id:e.id,...e.data()}));b(s)}catch(e){console.error("ForumHomePage: Error fetching posts client-side: ",e),o&&0!==o.length||b([])}finally{N(!1)}};o&&o.length>0&&!y&&"timestamp"===_?(b(o),N(!1)):e(),p&&console.error("Error from getStaticProps:",p)},[_,y,t,o,p]),x)?(0,a.jsxs)("div",{className:"page-error-indicator",children:["Authentication Error: ",x.message,". Please try refreshing."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"forum-homepage-container ".concat(w?"blurred":""),children:[(0,a.jsxs)("header",{className:"forum-header",children:[(0,a.jsx)("h1",{children:"Welcome To Our Community!"}),(0,a.jsxs)("div",{className:"forum-header-interactive-area",children:[(0,a.jsx)(i(),{href:"/forum/create-post",className:"create-post-button-main header-ask-question ".concat(t&&!m&&h?"":"disabled-link"),"aria-disabled":!t||m||!h,onClick:e=>{h?(!t||m)&&e.preventDefault():(e.preventDefault(),L())},children:"Ask a Question"}),(0,a.jsx)("div",{className:"user-section",children:m?(0,a.jsx)("span",{className:"auth-loading-text",children:"Loading user..."}):h?(0,a.jsxs)("div",{className:"user-actions-area",children:[(0,a.jsxs)("div",{className:"user-profile-info",children:[h.photoURL?(0,a.jsx)("img",{src:h.photoURL,alt:"".concat(h.displayName||"User","'s profile"),className:"profile-icon"}):(0,a.jsx)("span",{className:"profile-icon default-icon","aria-label":"Default user profile icon",children:(0,a.jsx)(f,{})}),(0,a.jsx)("span",{className:"display-name",title:h.displayName||"User",children:h.displayName||"User"})]}),(0,a.jsx)("button",{type:"button",onClick:E,className:"logout-button header-logout-button",children:"Logout"})]}):(0,a.jsx)("button",{type:"button",onClick:L,className:"login-signup-button header-login-button",disabled:m,children:"Login / Sign Up"})})]})]}),(0,a.jsxs)("aside",{className:"forum-sidebar",children:[(0,a.jsx)("h3",{children:"Popular Tags"}),(0,a.jsxs)("ul",{className:"tag-filter-list",children:[["Budgeting","Saving","Investing","Credit","Side Hustles","Debt","Freelancing","Real Estate","Taxes","Retirement"].map(e=>{let s=e.toLowerCase(),t=u.A[s]||{bg:"var(--muted-bg-color)",text:"var(--secondary-text-color)"};return(0,a.jsx)("li",{style:{backgroundColor:t.bg,color:t.text,borderColor:"var(--muted-bg-color)"!==t.bg?t.bg:"var(--border-color)"},className:"tag-pill ".concat(y===s?"active-tag":""),onClick:()=>P(e=>e===s?null:s),role:"button",tabIndex:0,onKeyPress:e=>{("Enter"===e.key||" "===e.key)&&P(s===y?null:s)},"aria-pressed":y===s,"aria-label":"Filter by tag: ".concat(e),children:e},e)}),y&&(0,a.jsxs)("li",{className:"clear-tag",onClick:()=>P(null),role:"button",tabIndex:0,onKeyPress:e=>{("Enter"===e.key||" "===e.key)&&P(null)},"aria-label":"Clear active tag filter",children:["Clear Filter ",(0,a.jsx)("span",{className:"clear-tag-icon",children:"âœ•"})]})]})]}),(0,a.jsxs)("div",{className:"sort-controls",children:[(0,a.jsx)("label",{htmlFor:"sort-select",children:"Sort by:"}),(0,a.jsxs)("select",{id:"sort-select",value:_,onChange:e=>v(e.target.value),"aria-label":"Sort forum posts",children:[(0,a.jsx)("option",{value:"timestamp",children:"Newest"}),(0,a.jsx)("option",{value:"helpfulVoteCount",children:"Most Helpful"})]})]}),(0,a.jsx)("div",{className:"forum-content",children:(0,a.jsxs)("main",{className:"post-feed-area",children:[(0,a.jsx)("h2",{children:"Recent Questions"}),j&&(0,a.jsx)("p",{className:"no-posts-message",children:"Loading posts..."}),!j&&0===C.length&&t&&(0,a.jsx)("p",{className:"no-posts-message",children:"No posts yet. Be the first to ask a question!"}),!j&&0===C.length&&!t&&(0,a.jsx)("p",{className:"no-posts-message",children:"Could not load posts. The forum database might be temporarily unavailable."}),!j&&C.length>0&&(0,a.jsx)("div",{className:"post-list",children:C.map(e=>(0,a.jsx)(g,{post:e,auth:s,db:t},e.id))})]})})]}),w&&(0,a.jsx)(d.A,{onClose:S,auth:s})]})};var b=!0;let j=e=>{let{initialPosts:s,error:t}=e,[r,l]=(0,n.useState)(null),[o,i]=(0,n.useState)(null),[c,d]=(0,n.useState)(!1),[u,p]=(0,n.useState)(null);return((0,n.useEffect)(()=>{(0,x.lo)().then(e=>{let{auth:s,db:t}=e;l(s),i(t),d(!0)}).catch(e=>{console.error("ForumHomePage Wrapper: Firebase initialization failed:",e),p(e),d(!0)})},[]),c)?u?(0,a.jsxs)("div",{className:"page-error-indicator",children:[(0,a.jsx)("strong",{children:"Error initializing Firebase:"})," ",u.message,".",(0,a.jsx)("br",{}),"Please try refreshing the page."]}):r?(0,a.jsx)(C,{firebaseAuth:r,firebaseDb:o,initialPosts:s,staticGenError:t}):(0,a.jsxs)("div",{className:"page-error-indicator",children:[(0,a.jsx)("strong",{children:"Critical Error:"})," Authentication service could not be loaded.",(0,a.jsx)("br",{}),"The forum cannot operate correctly. Please try refreshing."]}):(0,a.jsx)("div",{className:"page-loading-indicator",children:"Initializing forum services..."})}},8721:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/forum",function(){return t(6983)}])}},e=>{var s=s=>e(e.s=s);e.O(0,[121,855,636,792],()=>s(8721)),_N_E=e.O()}]);